@model TravelBlog.Models.Blog

@{
    ViewBag.Title = "Edit";
    Layout = "~/Views/Shared/_Layout.cshtml";
}




<!-- ========== Start Loading ========== -->

<div class="loading">
    <div class="loading-content">
        <div class="inner-item"></div>
        <div class="inner-item"></div>
        <div class="inner-item"></div>
        <div class="inner-item"></div>
        <div class="inner-item"></div>
    </div>
</div>

<!-- ========== End Loading ========== -->
<!-- ========== Start Header ========== -->

<header>
    <div class="site-brand text-center">
        <div class="container">
            <a href="index.html">
                <h2>Travel And Share</h2>
            </a>
            
        </div>
    </div>
    <div class="header-inner">
        <div class="container">
            <div class="row">
                <div class="col-md-9 col-sm-8 col-xs-3 pos-s">
                    <button class="menu-toggle">
                        <span class="bar"></span>
                        <span class="bar"></span>
                        <span class="bar"></span>
                    </button>
                    <nav class="navbar navbar-default">
                        <div class="collapse navbar-collapse">
                            <ul class="nav navbar-nav">
                                <li class="menu-item active">
                                    @Html.ActionLink("Home", "Index", "Home", new { area = "" }, new { @class = "nav-link" })
                                </li>


                            </ul>
                        </div>
                    </nav>
                </div>
                <div class="col-md-3 col-sm-4 col-xs-9 text-md-center">
                    <div class="search-toggle">
                        <i class="fa fa-search"></i>
                    </div>
                    <ul class="social-icons-menu list-unstyled">
                        <li><a href="#" target="_blank"><i class="fa fa-facebook"></i></a></li>
                        <li><a href="#" target="_blank"><i class="fa fa-twitter"></i></a></li>
                        <li><a href="#" target="_blank"><i class="fa fa-instagram"></i></a></li>
                        <li><a href="#" target="_blank"><i class="fa fa-pinterest"></i></a></li>
                        <li><a href="#" target="_blank"><i class="fa fa-youtube"></i></a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <div class="search-area">
        <span class="close-search">
            <i class="fa fa-close"></i>
        </span>
        <div class="display-table">
            <div class="display-table-cell">
                <form role="search" method="get" class="search-form" action="#">
                    <input type="search" class="search-field" placeholder="Search..." name="s" required="required">
                    <button type="submit" class="search-submit"><i class="fa fa-search"></i></button>
                </form>
            </div>
        </div>
    </div>
</header>
<div style="justify-content:center;display:flex">
    <div style="width:400px">
        @using (Html.BeginForm())
        {
            @Html.AntiForgeryToken()

        <div class="form-horizontal">
            <br />
            <h4>Blog Düzenle</h4>
            <hr />
            @Html.ValidationSummary(true, "", new { @class = "text-danger" })
            @Html.HiddenFor(model => model.Id)

            <div class="form-group">
                @Html.LabelFor(model => model.title, htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    @Html.EditorFor(model => model.title, new { htmlAttributes = new { @class = "form-control" } })
                    @Html.ValidationMessageFor(model => model.title, "", new { @class = "text-danger" })
                </div>
            </div>

            <div class="form-group">
                @Html.LabelFor(model => model.content, htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    @Html.EditorFor(model => model.content, new { htmlAttributes = new { @class = "form-control" } })
                    @Html.ValidationMessageFor(model => model.content, "", new { @class = "text-danger" })
                </div>
            </div>


            <div class="form-group">
                @Html.LabelFor(model => model.Image, "Image", htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    <input type="file" name="ImageFile" id="ImageFile" accept=".jpg, .jpeg, .png" onchange="updateImagePath(this)" />
                    <img id="previewImage" style="max-width: 200px; max-height: 200px; margin-top: 10px; display: none;" />
                    @Html.ValidationMessageFor(model => model.Image, "", new { @class = "text-danger" })
                    @Html.HiddenFor(model => model.Image) <!-- Gizli input dosyasını tutmak için -->
                </div>
            </div>

            <script>
                function updateImagePath(input) {
                    var file = input.files[0];
                    var imageInput = document.getElementById("Image");

                    if (file) {
                        var reader = new FileReader();

                        reader.onload = function (e) {
                            // Resmi görüntüle
                            document.getElementById("previewImage").src = e.target.result;
                            document.getElementById("previewImage").style.display = "block";

                            // Gizli input dosyasına dosya yolu bilgisini ekle
                            imageInput.value = e.target.result;
                        };

                        reader.readAsDataURL(file);
                    } else {
                        // Dosya seçilmediyse, gizli input dosyasını sıfırla
                        imageInput.value = "";
                        document.getElementById("previewImage").src = "";
                        document.getElementById("previewImage").style.display = "none";
                    }
                }
            </script>



            <div class="form-group">
                <div class="col-md-offset-2 col-md-10">
                    <input type="submit" value="Save" class="btn btn-default" />
                </div>
            </div>

            @Html.ActionLink("Back to Blog", "Index",new {id=Model.Id})
        </div>
        }
    </div>
</div>


